<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="Someday you may become the one you want to be." />



  <meta name="keywords" content="Hexo,next" />



  <link rel="alternate" href="/atom.xml" title="Light" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="Someday you may become the one you want to be.">
<meta property="og:type" content="website">
<meta property="og:title" content="Light">
<meta property="og:url" content="/page/5/index.html">
<meta property="og:site_name" content="Light">
<meta property="og:description" content="Someday you may become the one you want to be.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Light">
<meta name="twitter:description" content="Someday you may become the one you want to be.">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> Light </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  

  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?c4edb84f156d669a91e82332bff844a0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Light</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/all-categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/all-tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            Tags
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/06/03/Use-Material-Design/" itemprop="url">
                Use Material Design
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-06-03T21:17:22+08:00" content="2015-06-03">
            2015-06-03
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Android/" itemprop="url" rel="index">
                  <span itemprop="name">Android</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/06/03/Use-Material-Design/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/03/Use-Material-Design/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>Material Design 是我很喜欢的设计风格，简约至上。去年 Google IO 推出之后，就已经了解了。但是一直没有怎么看 Android L 的 API。趁 Android M 推出这段时间，就试着去使用了下 Android 5.0。</p>
<p><a href="http://design.1sters.com" target="_blank" rel="external">Material Design 中文版</a> 刚出来的时候，参与翻译了其中一章，算是国内最早的中文版吧。</p>
<p>看了 Android Training 里面的 Create App With Material Design，就写了一个简单的 Demo，不完整，但也涉及到了大部分常用的内容。</p>
<h3 id="Overview">Overview</h3><ul>
<li><strong>Material Theme</strong></li>
<li><strong>Activity Transition</strong></li>
<li><strong>RecyclerView &amp; CardView</strong></li>
<li><strong>Palette</strong></li>
<li><strong>Ripple</strong></li>
</ul>
<h3 id="Screenshot">Screenshot</h3><p><img src="http://7xluln.com1.z0.glb.clouddn.com/material1.png" alt=""></p>
<p><img src="http://7xluln.com1.z0.glb.clouddn.com/material3.png" alt=""></p>
<p><img src="http://7xluln.com1.z0.glb.clouddn.com/material2.png" alt=""></p>
<h3 id="Material_Theme">Material Theme</h3><p>Material 的主题其实和 Holo 的类型差不多，有这样的：</p>
<p><code>android:Theme.Material.Light</code><br><code>android:Theme.Material.Light.DarkActionBar</code><br><code>android:Theme.Material</code></p>
<p>除了这个，还可以在 Theme 里面重写一些属性来定义状态栏、标题栏和一些控件的颜色。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;resources&gt;</span><br><span class="line">  &lt;!<span class="comment">-- inherit from the material theme --&gt;</span></span><br><span class="line">  &lt;style <span class="property">name</span>=<span class="string">"AppTheme"</span> parent=<span class="string">"android:Theme.Material"</span>&gt;</span><br><span class="line">    &lt;!<span class="comment">-- Main theme colors --&gt;</span></span><br><span class="line">    &lt;!<span class="comment">--   your app branding color for the app bar --&gt;</span></span><br><span class="line">    &lt;<span class="property">item</span> <span class="property">name</span>=<span class="string">"android:colorPrimary"</span>&gt;@color/primary&lt;/<span class="property">item</span>&gt;</span><br><span class="line">    &lt;!<span class="comment">--   darker variant for the status bar and contextual app bars --&gt;</span></span><br><span class="line">    &lt;<span class="property">item</span> <span class="property">name</span>=<span class="string">"android:colorPrimaryDark"</span>&gt;@color/primary_dark&lt;/<span class="property">item</span>&gt;</span><br><span class="line">    &lt;!<span class="comment">--   theme UI controls like checkboxes and text fields --&gt;</span></span><br><span class="line">    &lt;<span class="property">item</span> <span class="property">name</span>=<span class="string">"android:colorAccent"</span>&gt;@color/accent&lt;/<span class="property">item</span>&gt;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Activity_Transition">Activity Transition</h3><p>这里的 Translation 是 Shared Element。在主页（图1）的 GridView 点击 item 之后，图片和文字将会有放大的效果，直接连接下一个 Activity 里面的图片和文字。在详情页面（图2）点击返回之后，图片和文字又回缩回主页中。</p>
<p>实现这个效果需要 Android 5.0 以上的版本。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,DetialActivity.<span class="keyword">class</span>);</span><br><span class="line">intent.putExtra(DetialActivity.COLOR_INDEX,position);</span><br><span class="line"></span><br><span class="line">ActivityOptionsCompat activityOptions = ActivityOptionsCompat.makeSceneTransitionAnimation(MainActivity.<span class="keyword">this</span>,</span><br><span class="line">                        </span><br><span class="line"><span class="keyword">new</span> Pair&lt;View, <span class="built_in">String</span>&gt;(view.findViewById(R.id.imageview_item),DetialActivity.DETIAL_IMAGE),</span><br><span class="line"><span class="keyword">new</span> Pair&lt;View, <span class="built_in">String</span>&gt;(view.findViewById(R.id.textview_name),DetialActivity.DETIAL_NAME));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now we can start the Activity, providing the activity options as a bundle</span></span><br><span class="line">ActivityCompat.startActivity(MainActivity.<span class="keyword">this</span>, intent, activityOptions.toBundle());</span><br></pre></td></tr></table></figure>
<p>主要用的是<code>makeSceneTransitionAnimation</code>这个方法，在 Pair 这个参数中是可以关联很多个数据的，这里之后图片和文字。</p>
<p>很重要的，要为每一个关联的 View 设定一个<code>TransitionName</code>，这里是<code>DETIAL_IMAGE</code>和<code>DETIAL_NAME</code>。</p>
<p>同样，在另外一个 Activity 里面需要为关联的 View 设置这个 Transition Name。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">ViewCompat</span><span class="class">.setTransitionName</span>(<span class="tag">mHeaderImageView</span>, <span class="tag">DETIAL_IMAGE</span>);</span><br><span class="line"><span class="tag">ViewCompat</span><span class="class">.setTransitionName</span>(<span class="tag">mHeaderTitle</span>, <span class="tag">DETIAL_NAME</span>);</span><br></pre></td></tr></table></figure>
<p>然后再让 View 显示就可以了。其实这里可以自定义各种<code>activityOptions</code>，来定义 Activity Transition 动画。</p>
<h3 id="RecyclerView_&amp;_CardView">RecyclerView &amp; CardView</h3><p>RecyclerView 就不再做介绍了，这里是和 CardView 一起使用的。在详情页（图2）下方的显示的就是。先来看 CardView。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;android<span class="class">.support</span><span class="class">.v7</span><span class="class">.widget</span><span class="class">.CardView</span></span><br><span class="line">   xmlns:card_view=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">   android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">   android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">   android:layout_margin=<span class="string">"4dp"</span></span><br><span class="line">   card_view:cardCornerRadius=<span class="string">"4dp"</span>&gt;</span><br><span class="line">&lt;/android<span class="class">.support</span><span class="class">.v7</span><span class="class">.widget</span><span class="class">.CardView</span>&gt;</span><br></pre></td></tr></table></figure>
<p>CardView 还有很多属性，比如阴影。这里只用了<code>cardCornerRadius</code>来设置圆角。然后把需要显示的布局嵌套在 CardView 里面就行。</p>
<p>RecyclerView 相对 ListView 来说，比较大的一个变化就是多了一个<code>LayoutManager</code>。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">layoutManager = <span class="keyword">new</span> FullyLinearLayoutManager(<span class="keyword">this</span>);</span><br><span class="line">recyclerView.setLayoutManager(layoutManager);</span><br></pre></td></tr></table></figure>
<p>这里的<code>FullyLinearLayoutManager</code>是继承的 LinearLayoutManager，因为 RecyclerView 和 ScrollView 有冲突。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public static <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> &#123;</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="type">TextView</span> tvColorName;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">ImageView</span> imgColor;</span><br><span class="line"></span><br><span class="line">   public <span class="type">ViewHolder</span>(<span class="type">View</span> itemView) &#123;</span><br><span class="line">       <span class="keyword">super</span>(itemView);</span><br><span class="line"></span><br><span class="line">       tvColorName = (<span class="type">TextView</span>)itemView.findViewById(<span class="type">R</span>.id.item_tv);</span><br><span class="line">       imgColor = (<span class="type">ImageView</span>)itemView.findViewById(<span class="type">R</span>.id.item_img);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个是 RecyclerView 的 ViewHolder，和 ListView 里面差不多。</p>
<p>继承<code>RecyclerView.Adapter</code>需要重写3个方法。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> ViewHolder(layoutInflater.from(context).inflate(R.layout.recycler_item,parent,<span class="keyword">false</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">final</span> <span class="keyword">int</span> index = position;</span><br><span class="line"></span><br><span class="line">   holder.tvColorName.setText(dataSet.get(position).getColorName());</span><br><span class="line">   holder.imgColor.setBackgroundColor(dataSet.get(position).getColorRes());</span><br><span class="line"></span><br><span class="line">   holder.tvColorName.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">       <span class="annotation">@Override</span></span><br><span class="line">       <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">           Message msg = <span class="keyword">new</span> Message();</span><br><span class="line">           msg.arg1 = dataSet.get(index).getColorRes();</span><br><span class="line">           msg.what = DetialActivity.CHANGE_COLOR;</span><br><span class="line">           <span class="keyword">handler</span>.sendMessage(msg);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">return</span> dataSet.<span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>onCreateViewHolder</code>传入之前写的 ViewHolder，在<code>onBindViewHolder</code>中绑定数据。</p>
<h3 id="Palette">Palette</h3><p>这个 Palette 是我相当喜欢的，能够获取到图像中的颜色数据。Android 5.0中还有一个<code>Clip Views</code>用来填充图片也不错。</p>
<p>在 RecyelerView 当中的数据就是用 Palette 获取的。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Palette</span>.generateAsync(bitmap,new <span class="keyword">Palette</span>.PaletteAsyncListener()&#123;</span><br><span class="line"></span><br><span class="line"> @Override</span><br><span class="line"> public void onGenerated(<span class="keyword">Palette</span> <span class="keyword">palette</span>) &#123;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//充满活力</span></span><br><span class="line">     <span class="keyword">Palette</span>.Swatch vibrantSwatch = <span class="keyword">palette</span>.getVibrantSwatch();</span><br><span class="line">     <span class="keyword">Palette</span>.Swatch lightVibrantSwatch = <span class="keyword">palette</span>.getLightVibrantSwatch();</span><br><span class="line">     <span class="keyword">Palette</span>.Swatch paletteDarkVibrantSwatch = <span class="keyword">palette</span>.getDarkVibrantSwatch();</span><br><span class="line"></span><br><span class="line">     <span class="comment">//柔和</span></span><br><span class="line">     <span class="keyword">Palette</span>.Swatch mutedSwatch = <span class="keyword">palette</span>.getMutedSwatch();</span><br><span class="line">     <span class="keyword">Palette</span>.Swatch darkMutedSwatch = <span class="keyword">palette</span>.getDarkMutedSwatch();</span><br><span class="line">     <span class="keyword">Palette</span>.Swatch lightMutedSwatch = <span class="keyword">palette</span>.getLightMutedSwatch();</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>
<p>一共获取了这几种颜色。是的，获取到的这些颜色是拿来更改状态栏或者标题栏的颜色。当然也可以是别的控件，主要目的是让整个 APP UI 更加统一。</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Window <span class="keyword">window</span> = getWindow();</span><br><span class="line"><span class="keyword">window</span>.setStatusBarColor(<span class="keyword">color</span>);</span><br><span class="line"><span class="keyword">window</span>.setNavigationBarColor(<span class="keyword">color</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Ripple">Ripple</h3><p>这个 Ripple 涟漪效果也是很不错的，有分为无界和有界的。这里也只是简单使用了下，在 RecyelerView 的 item 中，使用</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">android:</span>background=<span class="string">"?android:attr/selectableItemBackground"</span></span><br></pre></td></tr></table></figure>
<p>更多使用方法可以在官网中查看。</p>
<p>当然，Android 5.0 不仅仅这些，这里是很小一部分，还有很重要动画，阴影等。Material Design 给我最大的印象就是它的动画效果很不错。</p>
<p><a href="https://github.com/lightlz/Use-Material-Design" target="_blank" rel="external">源码在这里</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/05/31/Hexo-搭建博客/" itemprop="url">
                Hexo 搭建博客
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-05-31T10:42:31+08:00" content="2015-05-31">
            2015-05-31
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Hexo/" itemprop="url" rel="index">
                  <span itemprop="name">Hexo</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/05/31/Hexo-搭建博客/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/31/Hexo-搭建博客/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>总感觉 Wrodpress 太厚重了，刚好朋友推荐<code>Hexo</code>不错，于是就把博客迁徙了过来，折腾了一些时间，也遇到了一些问题。</p>
<h3 id="Hexo_安装">Hexo 安装</h3><p>Hexo 安装前需要电脑里面有安装 Git 和 Node.js。详细的安装方法可以查看 <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">官方文档</a>。</p>
<p>在安装的时候，我是直接从 Node.js 官网里面下载的包，这样装之后再执行：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -<span class="keyword">g</span> hexo-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure>
<p>发现无法安装，报了错：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">ERR</span>! Darwin 14.0.0</span><br><span class="line">npm <span class="keyword">ERR</span>! argv <span class="string">"node"</span> <span class="string">"/usr/local/bin/npm"</span> <span class="string">"install"</span> <span class="string">"-g"</span> <span class="string">"hexo"</span></span><br><span class="line">npm <span class="keyword">ERR</span>! node v0.10.33</span><br><span class="line">npm <span class="keyword">ERR</span>! npm v2.1.7</span><br><span class="line">npm <span class="keyword">ERR</span>! path /usr/<span class="keyword">local</span>/lib/node_modules/hexo/.gitmodules</span><br><span class="line">npm <span class="keyword">ERR</span>! code EACCES</span><br><span class="line">npm <span class="keyword">ERR</span>! errno 3</span><br><span class="line"></span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">Error</span>: EACCES, unlink '/usr/<span class="keyword">local</span>/lib/node_modules/hexo/.gitmodules'</span><br><span class="line">npm <span class="keyword">ERR</span>! &#123; [<span class="keyword">Error</span>: EACCES, unlink '/usr/<span class="keyword">local</span>/lib/node_modules/hexo/.gitmodules']</span><br><span class="line">npm <span class="keyword">ERR</span>! errno: 3,</span><br><span class="line">npm <span class="keyword">ERR</span>! code: 'EACCES',</span><br><span class="line">npm <span class="keyword">ERR</span>! path: '/usr/<span class="keyword">local</span>/lib/node_modules/hexo/.gitmodules' &#125;</span><br><span class="line">npm <span class="keyword">ERR</span>! </span><br><span class="line">npm <span class="keyword">ERR</span>! Please try running this command again <span class="keyword">as</span> root/Administrator.</span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">error</span> <span class="keyword">rolling</span> back <span class="keyword">Error</span>: EACCES, unlink '/usr/<span class="keyword">local</span>/lib/node_modules/hexo/.gitmodules'</span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">error</span> <span class="keyword">rolling</span> back &#123; [<span class="keyword">Error</span>: EACCES, unlink '/usr/<span class="keyword">local</span>/lib/node_modules/hexo/.gitmodules']</span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">error</span> <span class="keyword">rolling</span> back errno: 3,</span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">error</span> <span class="keyword">rolling</span> back code: 'EACCES',</span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">error</span> <span class="keyword">rolling</span> back path: '/usr/<span class="keyword">local</span>/lib/node_modules/hexo/.gitmodules' &#125;</span><br><span class="line"></span><br><span class="line">npm <span class="keyword">ERR</span>! Please <span class="keyword">include</span> the following <span class="keyword">file</span> with any support request:</span><br><span class="line">npm <span class="keyword">ERR</span>! /Users/xiangwenwen/npm-debug.<span class="literal">log</span></span><br></pre></td></tr></table></figure>
<p>看到好似是没有权限什么的，于是就加了个<code>sudo</code>，但是发现还是报错：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fsevents@0.2.0 <span class="operator"><span class="keyword">install</span> /usr/<span class="keyword">local</span>/lib/node_modules/hexo/node_modules/chokidar/node_modules/fsevents</span><br><span class="line">node-gyp rebuild</span><br><span class="line"></span><br><span class="line">gyp WARN EACCES <span class="keyword">user</span> <span class="string">"root"</span> does <span class="keyword">not</span> have permission <span class="keyword">to</span> access the dev dir &gt;<span class="string">"/Users/xiangwenwen/.node-gyp/0.10.33"</span></span><br><span class="line"></span><br><span class="line">gyp WARN EACCES attempting <span class="keyword">to</span> reinstall <span class="keyword">using</span> <span class="keyword">temporary</span> dev dir &gt;<span class="string">"/usr/local/lib/node_modules/hexo/node_modules/chokidar/node_modules/fsevents/.node-gyp"</span></span></span><br></pre></td></tr></table></figure>
<p>最后在 <a href="https://github.com/hexojs/hexo/issues/913" target="_blank" rel="external">Hexo issue</a> 看到了同样的问题，然后我在 xcode 里面装了<code>command Line Tools</code>在安装就可以了。建议使用文档上的方法安装 Node.js，我服务器的 Ubuntu 环境按照文档安装什么问题都没有。</p>
<h3 id="Hexo_走起">Hexo 走起</h3><h4 id="迁徙">迁徙</h4><p>安装好了 Hexo，可以按照官网的方法发布文章，这个很简单。发布完之后执行<code>hexo server</code>就可以在本地查看了。</p>
<p>官网也提供了很多类型的迁移方案，我把 wordpress 里面的内容拿下来之后，执行：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo migrate wordpress <span class="tag">&lt;<span class="title">source</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>就很快把内容迁移过来了。</p>
<h4 id="主题">主题</h4><p>使用主题也很容易，在官网推荐了15款主题。更多可以在 <a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">这里</a> 查看。</p>
<h4 id="多说评论">多说评论</h4><p>因为官方默认的是使用 Disqus，对国内用户不是很好。于是把这个换成了多说。去 <a href="http://duoshuo.com" target="_blank" rel="external">多说</a> 官网注册个账号，会获取到<code>xxx.duoshuo.com</code>这样的域名。</p>
<p>然后找到主题里面的文章的那个代码区域，将 Disqus 替换掉。可参考 <a href="http://dev.duoshuo.com/threads/541d3b2b40b5abcd2e4df0e9" target="_blank" rel="external">这里</a>。</p>
<p>这样完成之后基本的博客就算完成了，还剩最后一步最麻烦的：部署。</p>
<h3 id="Hexo_VPS_部署">Hexo VPS 部署</h3><p>当然，如果你选择部署在 GitHub 上，那么就不麻烦，很容易，可以参考官方文档。我个人不太建议这样，GitHub 的访问速度太容易抽筋，还有就是应该给予它更重要的用途。</p>
<h4 id="Linode">Linode</h4><p>选择了<code>Linode</code>，SSD 的访问速度还是不错的。买了最低配置的 $10/m，主机位置是在新加坡的，买不到日本的了。</p>
<p>按照它官网的方式，把系统先装好，我选择了最新的 Ubuntu 系统，然后再 boot，将服务开启（Running）。之后再按照之前的步骤把 Git &amp; Node.js &amp; Hexo 安装好。</p>
<h4 id="Nginx">Nginx</h4><p>Nginx 是一个高性能的 HTTP 和反向代理服务器。</p>
<p><strong>安装（Ubuntu 环境）</strong></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sudo apt-<span class="keyword">get</span> install nginx</span><br></pre></td></tr></table></figure>
<p><strong>在 Nginx 中新建虚拟主机</strong></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch <span class="regexp">/etc/</span>nginx<span class="regexp">/sites-available/</span>blog</span><br><span class="line">vi <span class="regexp">/etc/</span>nginx<span class="regexp">/sites-available/</span>blog</span><br></pre></td></tr></table></figure>
<p>然后使用一下配置：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">server</span> &#123;                </span><br><span class="line">	  <span class="title">listen</span> <span class="number">80</span> ;                                                                                                                                                                                              </span><br><span class="line">      <span class="title">root</span> /var/www/blog;                                                        </span><br><span class="line">	  <span class="title">server_name</span> llzz.me;                                                 </span><br><span class="line">	  <span class="title">access_log</span>  /var/log/nginx/blog_access.log;                                    </span><br><span class="line">	  <span class="title">error_log</span>   /var/log/nginx/blog_error.log;  </span><br><span class="line">	                                            </span><br><span class="line">	  <span class="title">location</span> <span class="regexp">~* ^.+\.(ico|gif|jpg|jpeg|png)$</span> &#123;                            </span><br><span class="line">		      <span class="title">root</span> /var/www/blog;                                    </span><br><span class="line">		      <span class="title">access_log</span>   <span class="built_in">off</span>;                 </span><br><span class="line">		      <span class="title">expires</span>      <span class="number">1d</span>;                            </span><br><span class="line">	  &#125;                                                                              </span><br><span class="line">	  <span class="title">location</span> <span class="regexp">~* ^.+\.(css|js|txt|xml|swf|wav)$</span> &#123;                                   </span><br><span class="line">		      <span class="title">root</span> /var/www/blog;                                                        </span><br><span class="line">		      <span class="title">access_log</span>   <span class="built_in">off</span>;                                                          </span><br><span class="line">		      <span class="title">expires</span>      <span class="number">10m</span>;                                                          </span><br><span class="line">	  &#125;                                                                              </span><br><span class="line">	  <span class="title">location</span> / &#123;                                                                   </span><br><span class="line">		     <span class="title">root</span> /var/www/blog;                                                </span><br><span class="line">		     <span class="title">if</span> (-f <span class="variable">$request_filename</span>) &#123;                                            </span><br><span class="line">		         <span class="title">rewrite</span><span class="regexp"> ^/(.*)$</span>  /<span class="variable">$1</span> <span class="built_in">break</span>;                                    </span><br><span class="line">		     &#125;                                                                      </span><br><span class="line">      &#125;                 </span><br><span class="line">		                                                                </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>server_name</code>      域名 ，<code>/var/www/blog</code>博客静态文件存放目录。</p>
<p>最后再执行一下命令。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln <span class="regexp">/etc/</span>nginx<span class="regexp">/sites-available/</span>blog <span class="regexp">/etc/</span>nginx<span class="regexp">/sites-enabled/</span>blog</span><br><span class="line"><span class="regexp">/etc/i</span>nit.d<span class="regexp">/nginx restart</span></span><br></pre></td></tr></table></figure>
<p>执行完之后，输入你的 IP 地址，是可以看到 Nginx 的成功信息的。</p>
<h3 id="SSH">SSH</h3><p>和平时使用 GitHub 一样，有一个 SSH 密钥。在本地<code>~/</code>目录下新建一个<code>.shh</code>目录（没有的话）。</p>
<p><strong>本地新建密钥公钥</strong></p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -<span class="keyword">C</span> <span class="string">"blog"</span></span><br></pre></td></tr></table></figure>
<p>可以直接全部回车，然后生成的有 <code>id_rsa.pub</code>，打开复制内容。</p>
<p><strong>服务端配置</strong></p>
<p>新建一个 git 用户（root）</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adduser git <span class="comment">--ingroup sudo</span></span><br></pre></td></tr></table></figure>
<p>git 用户下，粘贴刚才生成的 SSH 密钥</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">mkdir <span class="class">.ssh</span></span><br><span class="line">cd <span class="class">.ssh</span></span><br><span class="line">touch authorized_keys</span><br><span class="line">vi authorized_keys</span><br></pre></td></tr></table></figure>
<p>之后再终端输入<code>ssh git@llzz.me</code>，如果没什么问题，就可以通过 SSH 访问 git了。</p>
<p><strong>创建博客静态文件的仓库</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">mkdir blog<span class="class">.git</span></span><br><span class="line">cd blog<span class="class">.git</span></span><br><span class="line">git init --bare</span><br></pre></td></tr></table></figure>
<p><strong>在本地配置 Hexo 的 deploy</strong></p>
<p>设置 git 用户名</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user<span class="class">.email</span> <span class="string">"email@example.com"</span></span><br><span class="line">git config --global user<span class="class">.name</span> <span class="string">"username</span></span><br></pre></td></tr></table></figure>
<p>修改 Hexo 配置文件里面的 deploy</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:  </span><br><span class="line"><span class="attribute">type</span>: git  </span><br><span class="line"><span class="attribute">message</span>: update  </span><br><span class="line"><span class="attribute">repo</span>: git<span class="variable">@llzz</span>.<span class="attribute">me</span>:blog.git  </span><br><span class="line"><span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure>
<p>执行<code>hexo g</code>和    <code>hexo d</code>，没什么问题的话，静态文件会 push 到 git 仓库里面。（需要 clone 出来）</p>
<h4 id="Git_hooks">Git hooks</h4><p>每次 push 之后，博客静态文件将会在仓库里面，但是我们访问链接到的并不是 git 目录。所以每次 git 收到 push 消息之后，需要将内容拷贝到<code>/var/www/blog</code>目录下。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~/blog.git/hooks</span><br><span class="line">touch <span class="keyword">post</span>-receive</span><br><span class="line">vi <span class="keyword">post</span>-receive</span><br></pre></td></tr></table></figure>
<p>使用下面的脚本，内容将会自动拷贝到指定的目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash -l</span></span><br><span class="line">GIT_REPO=/home/git/blog.git</span><br><span class="line">TMP_GIT_CLONE=/tmp/blog</span><br><span class="line">PUBLIC_WWW=/var/www/blog</span><br><span class="line">rm -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="variable">$GIT_REPO</span> <span class="variable">$TMP_GIT_CLONE</span></span><br><span class="line">rm -rf <span class="variable">$&#123;PUBLIC_WWW&#125;</span>/*</span><br><span class="line">cp -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span>/* <span class="variable">$&#123;PUBLIC_WWW&#125;</span></span><br></pre></td></tr></table></figure>
<p>最后更改脚步的权限和<code>/var/www/blog</code>访问权限。</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>chmod +x post-receive</span><br><span class="line"><span class="variable">$ </span>sudo chmod <span class="number">777</span> /var/www/blog</span><br></pre></td></tr></table></figure>
<h4 id="hexo_g_&amp;&amp;_hexo_d">hexo g &amp;&amp; hexo d</h4><p>博客内容做了更改之后，执行<code>hexo g</code>和<code>hexo d</code>就会把内容更新到你的服务器中。配置完之后更新文章别说有多么方便了。</p>
<h3 id="参考内容">参考内容</h3><p><a href="http://blog.berry10086.com/Tech/deploy-hexo-to-vps/" target="_blank" rel="external">点这里</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/28/android-ormlite/" itemprop="url">
                Android Ormlite
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-04-28T18:32:53+08:00" content="2015-04-28">
            2015-04-28
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Android/" itemprop="url" rel="index">
                  <span itemprop="name">Android</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/28/android-ormlite/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/28/android-ormlite/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>之前一直比较少用本地数据库，发现写 sql 语句很烦杂，才想起 orm 这回事。于是看了下 ormlite 的文档，就稍微整理下。</p>
<p>先来个单表的简单使用下 ormlite 的 api。</p>
<h3 id="先下载_ormlite-core-jar_&amp;_ormlite-android-jar"><strong>先下载 ormlite-core.jar &amp; ormlite-android.jar</strong></h3><p><a href="http://ormlite.com/releases/" target="_blank" rel="external">下载地址</a></p>
<h3 id="创建数据模型"><strong>创建数据模型</strong></h3><p>这里只简单创建了一个学生类，包含的信息有学号，姓名，年龄，性别，年级。</p>
<p><code>@DatabaseTable(tableName=&quot;student&quot;)
**public class Student implements Serializable {**``
@DatabaseField(generatedId = true,allowGeneratedIdInsert = true)
**private int id;**
@DatabaseField(canBeNull = false)
**private int stuId;**
@DatabaseField(canBeNull = false)
**private String stuName;**
@DatabaseField()
**private String stuAge;**
@DatabaseField()
**private String stuSex;**
@DatabaseField(defaultValue = &quot;one&quot;)
**private String stuGrade;**``
public Student() {}</code></p>
<p>使用<span style="color: #999999;"> <span style="color: #333333;">@DatabaseTable(tableName=”student”) 来定义表的名称。</span></span></p>
<p>使用 @DatabaseField() 来定义表的字段。（<a href="http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_2.html#Using" target="_blank" rel="external">字段的属性点击此处查看</a>）</p>
<p>注意，ormlite 要求需要有一个空的构造方法。</p>
<p>&nbsp;</p>
<h3 id="创建_DatabaseHelper_继承_OrmLiteSqliteOpenHelper"><strong>创建 DatabaseHelper 继承 OrmLiteSqliteOpenHelper</strong></h3><p>1，构造方法中调用父类方法创建数据库。</p>
<p><code>public DatabaseHelper(Context context){
super(context,DATABASE_NAME,null,DATABASE_VERSION);
}
&lt;code&gt;</code></p>
<p>2，继承需要重写 onCreate()，在方法里面创建数据库表</p>
<p><code>@Override
public void onCreate(SQLiteDatabase sqLiteDatabase, ConnectionSource connectionSource) {``
try {``
TableUtils.createTable(connectionSource, Student.class);
TableUtils.createTable(connectionSource,Course.class);``
} catch (SQLException e) {
e.printStackTrace();
}
}</code></p>
<p>注意，需要重写 onUpgrade() 方法，用于数据库版本更新</p>
<p>3，创建数据访问对象 Dao</p>
<p><code>public RuntimeExceptionDao&amp;lt;Student, Integer&amp;gt; getSimpleStudentDao() {``
if (simpleStudentDao == null) {
simpleStudentDao = getRuntimeExceptionDao(Student.class);
}``
return simpleStudentDao;
}</code></p>
<p>这些步骤完成之后，新建一个 DatabaseHelper 类，在 data/data 包名下是可以看到 databases 文件夹的，可以用 sqlite 命令查看数据库具体信息。</p>
<p>&nbsp;</p>
<h3 id="数据操作增删改查"><strong>数据操作增删改查</strong></h3><p>1，初始化数据（插入）</p>
<p><code>public static void insertStudent(Context context,List studentList){``
RuntimeExceptionDao&amp;lt;Student, Integer&amp;gt; simpleStudentDao = DatabaseHelper.getHelper(context)
.getSimpleStudentDao();``
for(int i=0;i&amp;lt;studentList.size();i++){
simpleStudentDao.create(studentList.get(i));
}
}</code></p>
<p>2，查询所有数据</p>
<p><code>List list = simpleStudentDao.queryForAll();</code></p>
<p>3，更新单个数据</p>
<p><code>simpleStudentDao.updateRaw(&quot;UPDATE</code>student<code>SET &quot;+ key + &quot;= &#39;&quot;+value+&quot;&#39; WHERE stuId = &quot;+where+&quot;;&quot;);</code></p>
<p>4，删除一个数据</p>
<p><code>simpleStudentDao.delete(student);</code></p>
<p>简单的一些操作就这样。</p>
<p>&nbsp;</p>
<hr>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>还有一些情况是，一对多，多对多，这些个人比较少用，也稍微看了下。官方文档上是要求设置 foreign 。根据个人创建的模型类来选择搭建方式。</p>
<p>这里根据之前的方式，再创建了一个 Course 课程数据表。搭建方式可以在 Course 中声明一个 Student 类型，再通过 join 来实现一对多 &amp; 多对多查询。</p>
<p>我这里通过新建一个 Student 与 Course 的关系类 StuCourseRelate 来关联数据。</p>
<p>&nbsp;</p>
<p><strong>新建 StuCourseRelate 类</strong></p>
<p><code>@DatabaseTable(tableName = &quot;student_courses&quot;)
public class StuCourseRelate {``
@DatabaseField(generatedId = true,allowGeneratedIdInsert = true)
**private int id;**
@DatabaseField(foreign = true,columnName=&quot;sId&quot;)
**private Student student;**
@DatabaseField(foreign = true,columnName=&quot;cId&quot;)
**private Course course;**``
public StuCourseRelate() {
}</code></p>
<p><strong>注意：columnName  一定要与其他两个类中的 id 的列名相同</strong></p>
<p>（因为它是通过自动生成的 id 来标记 Student &amp; Course 的，最好用个 final 写好，我今天懒了～）</p>
<p>&nbsp;</p>
<p><strong>查询方法</strong></p>
<p>这里只是查询每个学生选的课程。</p>
<p><code>public static List&amp;lt;Course&amp;gt; queryCourse(Context context,Student student) throws SQLException {``
List&amp;lt;Course&amp;gt; list = null;
RuntimeExceptionDao&amp;lt;StuCourseRelate, Integer&amp;gt; simpleStuCourseDao = DatabaseHelper.getHelper(context)
.getSimpleStuCourseDao();
RuntimeExceptionDao&amp;lt;Course, Integer&amp;gt; simpleCourseDao = DatabaseHelper.getHelper(context)
.getSimpleCourseDao();
/**
select * from</code>course<code>where</code>cId<code>in {
select</code>cId<code>from</code>student_courses<code>where</code>sId<code>= ?
}
**/
//内
QueryBuilder&amp;lt;StuCourseRelate, Integer&amp;gt; stuCourseQueryBuilder = simpleStuCourseDao.queryBuilder();
//select column : cId
stuCourseQueryBuilder.selectColumns(&quot;cId&quot;);
//where sId = ?
SelectArg userSelectArg = new SelectArg();
stuCourseQueryBuilder.where().eq(&quot;sId&quot;, userSelectArg);
//外
QueryBuilder&amp;lt;Course, Integer&amp;gt; couseBuilder = simpleCourseDao.queryBuilder();
//where in
PreparedQuery&amp;lt;Course&amp;gt; qurey = couseBuilder.where().in(&quot;cId&quot;,stuCourseQueryBuilder).prepare();
//index of the holder
qurey.setArgumentHolderValue(0,student);
list = simpleCourseDao.query(qurey);
return list;</code>}</p>
<p>数据的插入方法和之前的是一样的，有了数据之后获取到 student 的所有数据，之后查询。</p>
<p><code>DatabaseUtil.queryCourse(this,studentList.get(i));</code></p>
<hr>
<p>其他的可以看下文档 <a href="http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_toc.html#SEC_Contents" target="_blank" rel="external">这里</a></p>
<p><a href="https://github.com/lightlz/OrmliteDemo" target="_blank" rel="external">代码地址</a></p>
<p>&nbsp;</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/03/19/2015/" itemprop="url">
                2015
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-03-19T22:46:56+08:00" content="2015-03-19">
            2015-03-19
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Other/" itemprop="url" rel="index">
                  <span itemprop="name">Other</span>
                </a>
              </span>

              
              

            
          </span>
        

        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>本来早就要写写关于自己的2015，但是一直都写不出来。其实是没有挤时间去写这个东西，毕业设计，毕业论文还在等着。写下来，纯粹是想知道某年回来看的时候自己会有怎么样个心情。</p>
<p>2015对我来说算是一个不大不小的转折点，大吧，6月份就毕业了。说小吧，我出来工作也1年多了。但我觉的唯一不同的是，没毕业之前总是带着学生的心态去工作。</p>
<p>在这个时间段，我想，大家谈的最多的应该就是找到一个怎么样工作。在还没有找工作的时候，就经常听大人们说，现在的大学生好高骛远，不踏实的找工作。我想如果没有捷径，何苦去浪费这4年时间？ 错过了一些不错的工作机会，但并不需要灰心，更应该静心思考自己差在哪。当然，有时候你比他人优秀，但你远没有他人幸运。</p>
<p>工作了一年多，其实回想起来自己真的学会了什么？你问我，我也回答不上来。说技术上的提升吧，这一年又能成长到哪去，估计工作仅仅只是熟悉一些小平台，打打酱油就过去了，大事总有老的顶着。人情世故？个人修养？这也没有什么吧，做技术的天天在自己位置，又不用见客户，这方面学不到什么。</p>
<p>我记得就是之前公司有个韩国客户，当时他的一款平板应用就是我在调试。有次改到很晚，交接的中国人不在，他就跑到我位子上来问我“Have <span id="tran_11_0" class="">things</span> <span id="tran_11_1" class="">gotten worse</span> <span id="tran_11_3" class="">or</span> gotten <span id="tran_11_4" class="">better</span>?”，我一下子就听懂了，但是就是不知道怎么回答。</p>
<p>突然想他妈的我学了那么多英语都学了什么。</p>
<p>我想最大的收获就是工作让我学会思考和认清自己。思考很多种，或者解决问题的方法，或者怎么改变自己。因为工作就是为他人解决问题的，不更多的思考，只会增加负担。在执行这一系列的过程中，总会遇到问题，比如觉得自己英文不好，耐心不够，这都让自己更了解自己。不管有没有去改变，你都知道自己弱点所在。</p>
<p>工作给予了我这些，业余的时候也有一些小触动。让我必须给自己的忠告就是：要与优秀的人为伍，不然你很难达到优秀。</p>
<p>有人说，你的高度其实就是你最要好的5个朋友的高度平均值。这有点抽象，但是认真想一想，好似又是正确的。所以才会有那么多的大学生想进大公司，除了待遇之外，或许里面的人，都是相对优秀的吧。</p>
<p>除了给自己的忠告，我想还需要有适当的内心平静。人有时候会很清晰的自己想要什么，当走着走着的时候，这个又会变得模糊。我正走在这条路上，有时觉的走对了，有时候又不知道自己在忙什么。就好像“看山不是山，看水不是水”这个境界，所以此时想有个平静的内心，在想想我该继续追求什么。</p>
<p>还有一些小想法需要完成：</p>
<p>25本书。多读书，不然骗不了女孩子。</p>
<p>好好练字。或许能获得平静。</p>
<p>每周至少跳舞一次。</p>
<p>发表25篇博文。</p>
<p>旅游一次。呼吸下新鲜空气而已。</p>
<p>英文。这个不限量，但不能忘。</p>
<p>&nbsp;</p>
<p>2015，就这样吧。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/">&laquo;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/pic.jpg" alt="Light" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Light</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Someday you may become the one you want to be.</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/all-categories">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/all-tags">
              <span class="site-state-item-count">40</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="menu-item-icon icon-next-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lightlz" target="_blank">GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto://light.lz1993@gmail.com" target="_blank">Email</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Light</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"llzz"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
